{"ast":null,"code":"var _jsxFileName = \"/Users/denianclosshoerlle/projetos/omnistack7/web/src/pages/feed/feed.js\";\nimport React, { useState, useEffect } from \"react\";\nimport io from \"socket.io-client\";\nimport * as s from \"./styled-feed\";\nimport { icons } from \"../../assets\";\nimport { likePost } from \"../../services\";\nimport { getPosts } from \"../../services\";\nimport { Loader } from \"../../components\";\nconst socket = io(\"http://localhost:3333\");\nexport default (() => {\n  const [posts, setPosts] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const likeListener = () => {\n    socket.on(\"like\", likedPost => {\n      setPosts(posts.map(post => post.id === likedPost.id ? likedPost : post));\n    });\n  };\n\n  useEffect(() => {\n    likeListener();\n    getPosts().then(postsApi => {\n      setPosts(postsApi);\n    }).finally(() => {\n      setLoading(false);\n    });\n  }, []);\n  useEffect(() => {\n    // gambiarra pq nem tudo na vida sÃ£o flores ğŸ˜˜\n    if (posts.length) {\n      socket.on(\"post\", newPost => {\n        setPosts([newPost, ...posts]);\n      });\n    }\n  }, [posts]);\n\n  const handleLike = id => {\n    likePost(id).then(() => {}).catch(e => console.log(e, e.response));\n  };\n\n  if (loading) return /*#__PURE__*/React.createElement(s.LoaderContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }));\n  return /*#__PURE__*/React.createElement(s.PostList, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }\n  }, !posts.length ? /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, \"N\\xE3o foi possivel buscar os posts \", \":(\") : posts.map(post => /*#__PURE__*/React.createElement(s.PostWrapper, {\n    key: post.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(s.PostHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(s.UserInfo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(s.UserLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }, post.author), /*#__PURE__*/React.createElement(s.PlaceLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  }, post.place)), /*#__PURE__*/React.createElement(s.Icon, {\n    src: icons.more,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(s.PostImage, {\n    src: `http://localhost:3333/file/${post.image}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(s.PostFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(s.Actions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(s.Icon, {\n    onClick: () => handleLike(post._id),\n    height: 20,\n    src: icons.like,\n    alt: \"like\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(s.Icon, {\n    height: 20,\n    src: icons.comment,\n    alt: \"comment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(s.Icon, {\n    height: 20,\n    src: icons.send,\n    alt: \"send\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 15\n    }\n  }, post.likes), /*#__PURE__*/React.createElement(s.PostDescription, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 15\n    }\n  }, post.description, \" \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 36\n    }\n  }), /*#__PURE__*/React.createElement(s.PostHashTags, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  }, post.hashtags))))));\n});","map":{"version":3,"sources":["/Users/denianclosshoerlle/projetos/omnistack7/web/src/pages/feed/feed.js"],"names":["React","useState","useEffect","io","s","icons","likePost","getPosts","Loader","socket","posts","setPosts","loading","setLoading","likeListener","on","likedPost","map","post","id","then","postsApi","finally","length","newPost","handleLike","catch","e","console","log","response","author","place","more","image","_id","like","comment","send","likes","description","hashtags"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport io from \"socket.io-client\";\nimport * as s from \"./styled-feed\";\nimport { icons } from \"../../assets\";\nimport { likePost } from \"../../services\";\nimport { getPosts } from \"../../services\";\nimport { Loader } from \"../../components\";\n\nconst socket = io(\"http://localhost:3333\");\n\nexport default () => {\n  const [posts, setPosts] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const likeListener = () => {\n    socket.on(\"like\", (likedPost) => {\n      setPosts(\n        posts.map((post) => (post.id === likedPost.id ? likedPost : post))\n      );\n    });\n  };\n\n  useEffect(() => {\n    likeListener();\n\n    getPosts()\n      .then((postsApi) => {\n        setPosts(postsApi);\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  }, []);\n\n  useEffect(() => {\n    // gambiarra pq nem tudo na vida sÃ£o flores ğŸ˜˜\n    if (posts.length) {\n      socket.on(\"post\", (newPost) => {\n        setPosts([newPost, ...posts]);\n      });\n    }\n  }, [posts]);\n\n  const handleLike = (id) => {\n    likePost(id)\n      .then(() => {})\n      .catch((e) => console.log(e, e.response));\n  };\n\n  if (loading)\n    return (\n      <s.LoaderContainer>\n        <Loader />\n      </s.LoaderContainer>\n    );\n\n  return (\n    <s.PostList>\n      {!posts.length ? (\n        <label>NÃ£o foi possivel buscar os posts {\":(\"}</label>\n      ) : (\n        posts.map((post) => (\n          <s.PostWrapper key={post.id}>\n            <s.PostHeader>\n              <s.UserInfo>\n                <s.UserLabel>{post.author}</s.UserLabel>\n                <s.PlaceLabel>{post.place}</s.PlaceLabel>\n              </s.UserInfo>\n\n              <s.Icon src={icons.more} />\n            </s.PostHeader>\n\n            <s.PostImage src={`http://localhost:3333/file/${post.image}`} />\n\n            <s.PostFooter>\n              <s.Actions>\n                <s.Icon\n                  onClick={() => handleLike(post._id)}\n                  height={20}\n                  src={icons.like}\n                  alt=\"like\"\n                />\n\n                <s.Icon height={20} src={icons.comment} alt=\"comment\" />\n                <s.Icon height={20} src={icons.send} alt=\"send\" />\n              </s.Actions>\n              <strong>{post.likes}</strong>\n\n              <s.PostDescription>\n                {post.description} <br />\n                <s.PostHashTags>{post.hashtags}</s.PostHashTags>\n              </s.PostDescription>\n            </s.PostFooter>\n          </s.PostWrapper>\n        ))\n      )}\n    </s.PostList>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}